{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import\"./Dealers.css\";import\"../assets/style.css\";import positive_icon from\"../assets/positive.png\";import neutral_icon from\"../assets/neutral.png\";import negative_icon from\"../assets/negative.png\";import review_icon from\"../assets/reviewbutton.png\";import Header from'../Header/Header';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Dealer=()=>{const[dealer,setDealer]=useState({});const[reviews,setReviews]=useState([]);const[unreviewed,setUnreviewed]=useState(false);const[postReview,setPostReview]=useState(/*#__PURE__*/_jsx(_Fragment,{}));let params=useParams();let id=params.id;const senti_icon=sentiment=>{let icon=sentiment===\"positive\"?positive_icon:sentiment===\"negative\"?negative_icon:neutral_icon;return icon;};useEffect(()=>{let curr_url=window.location.href;let root_url=curr_url.substring(0,curr_url.indexOf(\"dealer\"));let dealer_url=root_url+\"djangoapp/dealer/\".concat(id);let reviews_url=root_url+\"djangoapp/reviews/dealer/\".concat(id);let post_review=root_url+\"postreview/\".concat(id);const get_dealer=async()=>{const res=await fetch(dealer_url,{method:\"GET\"});const retobj=await res.json();if(retobj.status===200){let dealerobjs=Array.from(retobj.dealer);setDealer(dealerobjs[0]);}};const get_reviews=async()=>{const res=await fetch(reviews_url,{method:\"GET\"});const retobj=await res.json();if(retobj.status===200){if(retobj.reviews.length>0){setReviews(retobj.reviews);}else{setUnreviewed(true);}}};get_dealer();get_reviews();if(sessionStorage.getItem(\"username\")){setPostReview(/*#__PURE__*/_jsx(\"a\",{href:post_review,children:/*#__PURE__*/_jsx(\"img\",{src:review_icon,style:{width:'10%',marginLeft:'10px',marginTop:'10px'},alt:\"Post Review\"})}));}},[id]);// Solo 'id' como dependencia\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"20px\"},children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"10px\"},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{color:\"grey\"},children:[dealer.full_name,postReview]}),/*#__PURE__*/_jsxs(\"h4\",{style:{color:\"grey\"},children:[dealer['city'],\",\",dealer['address'],\", Zip - \",dealer['zip'],\", \",dealer['state'],\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"reviews_panel\",children:reviews.length===0&&unreviewed===false?/*#__PURE__*/_jsx(\"div\",{children:\"Loading Reviews....\"}):unreviewed===true?/*#__PURE__*/_jsx(\"div\",{children:\"No reviews yet! \"}):reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{className:\"review_panel\",children:[/*#__PURE__*/_jsx(\"img\",{src:senti_icon(review.sentiment),className:\"emotion_icon\",alt:\"Sentiment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"review\",children:review.review}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer\",children:[review.name,\" \",review.car_make,\" \",review.car_model,\" \",review.car_year]})]},review.id||Math.random()))})]});};export default Dealer;","map":{"version":3,"names":["React","useState","useEffect","useParams","positive_icon","neutral_icon","negative_icon","review_icon","Header","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","Dealer","dealer","setDealer","reviews","setReviews","unreviewed","setUnreviewed","postReview","setPostReview","params","id","senti_icon","sentiment","icon","curr_url","window","location","href","root_url","substring","indexOf","dealer_url","concat","reviews_url","post_review","get_dealer","res","fetch","method","retobj","json","status","dealerobjs","Array","from","get_reviews","length","sessionStorage","getItem","children","src","style","width","marginLeft","marginTop","alt","margin","color","full_name","className","map","review","name","car_make","car_model","car_year","Math","random"],"sources":["/home/project/xrwvm-fullstack_developer_capstone/server/frontend/src/components/Dealers/Dealer.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport \"./Dealers.css\";\nimport \"../assets/style.css\";\nimport positive_icon from \"../assets/positive.png\"\nimport neutral_icon from \"../assets/neutral.png\"\nimport negative_icon from \"../assets/negative.png\"\nimport review_icon from \"../assets/reviewbutton.png\"\nimport Header from '../Header/Header';\n\nconst Dealer = () => {\n    const [dealer, setDealer] = useState({});\n    const [reviews, setReviews] = useState([]);\n    const [unreviewed, setUnreviewed] = useState(false);\n    const [postReview, setPostReview] = useState(<></>)\n\n    let params = useParams();\n    let id = params.id;\n\n    const senti_icon = (sentiment) => {\n        let icon = sentiment === \"positive\" ? positive_icon : sentiment === \"negative\" ? negative_icon : neutral_icon;\n        return icon;\n    }\n\n    useEffect(() => {\n        let curr_url = window.location.href;\n        let root_url = curr_url.substring(0, curr_url.indexOf(\"dealer\"));\n        let dealer_url = root_url + `djangoapp/dealer/${id}`;\n        let reviews_url = root_url + `djangoapp/reviews/dealer/${id}`;\n        let post_review = root_url + `postreview/${id}`;\n\n        const get_dealer = async () => {\n            const res = await fetch(dealer_url, {\n                method: \"GET\"\n            });\n            const retobj = await res.json();\n\n            if (retobj.status === 200) {\n                let dealerobjs = Array.from(retobj.dealer)\n                setDealer(dealerobjs[0])\n            }\n        }\n\n        const get_reviews = async () => {\n            const res = await fetch(reviews_url, {\n                method: \"GET\"\n            });\n            const retobj = await res.json();\n\n            if (retobj.status === 200) {\n                if (retobj.reviews.length > 0) {\n                    setReviews(retobj.reviews)\n                } else {\n                    setUnreviewed(true);\n                }\n            }\n        }\n\n        get_dealer();\n        get_reviews();\n\n        if (sessionStorage.getItem(\"username\")) {\n            setPostReview(\n                <a href={post_review}>\n                    <img src={review_icon} style={{ width: '10%', marginLeft: '10px', marginTop: '10px' }} alt='Post Review' />\n                </a>\n            )\n        }\n    }, [id]);  // Solo 'id' como dependencia\n\n    return (\n        <div style={{ margin: \"20px\" }}>\n            <Header />\n            <div style={{ marginTop: \"10px\" }}>\n                <h1 style={{ color: \"grey\" }}>{dealer.full_name}{postReview}</h1>\n                <h4 style={{ color: \"grey\" }}>{dealer['city']},{dealer['address']}, Zip - {dealer['zip']}, {dealer['state']} </h4>\n            </div>\n            <div className=\"reviews_panel\">\n                {reviews.length === 0 && unreviewed === false ? (\n                    <div>Loading Reviews....</div>\n                ) : unreviewed === true ? <div>No reviews yet! </div> :\n                    reviews.map(review => (\n                        <div className='review_panel' key={review.id || Math.random()}>\n                            <img src={senti_icon(review.sentiment)} className=\"emotion_icon\" alt='Sentiment' />\n                            <div className='review'>{review.review}</div>\n                            <div className=\"reviewer\">{review.name} {review.car_make} {review.car_model} {review.car_year}</div>\n                        </div>\n                    ))}\n            </div>\n        </div>\n    )\n}\n\nexport default Dealer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}