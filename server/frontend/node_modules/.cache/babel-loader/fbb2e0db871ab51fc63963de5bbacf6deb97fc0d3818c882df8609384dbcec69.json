{"ast":null,"code":"import React,{useState,useEffect}from'react';import\"./Dealers.css\";import\"../assets/style.css\";import Header from'../Header/Header';import review_icon from\"../assets/reviewicon.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Dealers=()=>{const[dealersList,setDealersList]=useState([]);// let [state, setState] = useState(\"\")\nlet[states,setStates]=useState([]);// let root_url = window.location.origin\nlet dealer_url=\"/djangoapp/get_dealers\";let dealer_url_by_state=\"/djangoapp/get_dealers/\";const filterDealers=async state=>{dealer_url_by_state=dealer_url_by_state+state;const res=await fetch(dealer_url_by_state,{method:\"GET\"});const retobj=await res.json();if(retobj.status===200){let state_dealers=Array.from(retobj.dealers);setDealersList(state_dealers);}};const get_dealers=async()=>{const res=await fetch(dealer_url,{method:\"GET\"});const retobj=await res.json();if(retobj.status===200){let all_dealers=Array.from(retobj.dealers);let states=[];all_dealers.forEach(dealer=>{states.push(dealer.state);});setStates(Array.from(new Set(states)));setDealersList(all_dealers);}};useEffect(()=>{get_dealers();},[]);let isLoggedIn=sessionStorage.getItem(\"username\")!=null?true:false;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dealer Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Zip\"}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"select\",{name:\"state\",id:\"state\",onChange:e=>filterDealers(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",selected:true,disabled:true,hidden:true,children:\"State\"}),/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"All States\"}),states.map(state=>/*#__PURE__*/_jsx(\"option\",{value:state,children:state}))]})}),isLoggedIn?/*#__PURE__*/_jsx(\"th\",{children:\"Review Dealer\"}):/*#__PURE__*/_jsx(_Fragment,{})]}),dealersList.map(dealer=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:dealer['id']}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:'/dealer/'+dealer['id'],children:dealer['full_name']})}),/*#__PURE__*/_jsx(\"td\",{children:dealer['city']}),/*#__PURE__*/_jsx(\"td\",{children:dealer['address']}),/*#__PURE__*/_jsx(\"td\",{children:dealer['zip']}),/*#__PURE__*/_jsx(\"td\",{children:dealer['state']}),isLoggedIn?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/postreview/\".concat(dealer['id']),children:/*#__PURE__*/_jsx(\"img\",{src:review_icon,className:\"review_icon\",alt:\"Post Review\"})})}):/*#__PURE__*/_jsx(_Fragment,{})]}))]}),\";\"]});};export default Dealers;","map":{"version":3,"names":["React","useState","useEffect","Header","review_icon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dealers","dealersList","setDealersList","states","setStates","dealer_url","dealer_url_by_state","filterDealers","state","res","fetch","method","retobj","json","status","state_dealers","Array","from","dealers","get_dealers","all_dealers","forEach","dealer","push","Set","isLoggedIn","sessionStorage","getItem","children","className","name","id","onChange","e","target","value","selected","disabled","hidden","map","href","concat","src","alt"],"sources":["/home/project/xrwvm-fullstack_developer_capstone/server/frontend/src/components/Dealers/Dealers.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport \"./Dealers.css\";\nimport \"../assets/style.css\";\nimport Header from '../Header/Header';\nimport review_icon from \"../assets/reviewicon.png\"\n\nconst Dealers = () => {\n  const [dealersList, setDealersList] = useState([]);\n  // let [state, setState] = useState(\"\")\n  let [states, setStates] = useState([])\n\n  // let root_url = window.location.origin\n  let dealer_url =\"/djangoapp/get_dealers\";\n  \n  let dealer_url_by_state = \"/djangoapp/get_dealers/\";\n \n  const filterDealers = async (state) => {\n    dealer_url_by_state = dealer_url_by_state+state;\n    const res = await fetch(dealer_url_by_state, {\n      method: \"GET\"\n    });\n    const retobj = await res.json();\n    if(retobj.status === 200) {\n      let state_dealers = Array.from(retobj.dealers)\n      setDealersList(state_dealers)\n    }\n  }\n\n  const get_dealers = async ()=>{\n    const res = await fetch(dealer_url, {\n      method: \"GET\"\n    });\n    const retobj = await res.json();\n    if(retobj.status === 200) {\n      let all_dealers = Array.from(retobj.dealers)\n      let states = [];\n      all_dealers.forEach((dealer)=>{\n        states.push(dealer.state)\n      });\n\n      setStates(Array.from(new Set(states)))\n      setDealersList(all_dealers)\n    }\n  }\n  useEffect(() => {\n    get_dealers();\n  },[]);  \n\n\nlet isLoggedIn = sessionStorage.getItem(\"username\") != null ? true : false;\nreturn(\n  <div>\n      <Header/>\n\n     <table className='table'>\n      <tr>\n      <th>ID</th>\n      <th>Dealer Name</th>\n      <th>City</th>\n      <th>Address</th>\n      <th>Zip</th>\n      <th>\n      <select name=\"state\" id=\"state\" onChange={(e) => filterDealers(e.target.value)}>\n      <option value=\"\" selected disabled hidden>State</option>\n      <option value=\"All\">All States</option>\n      {states.map(state => (\n          <option value={state}>{state}</option>\n      ))}\n      </select>        \n\n      </th>\n      {isLoggedIn ? (\n          <th>Review Dealer</th>\n         ):<></>\n      }\n      </tr>\n     {dealersList.map(dealer => (\n        <tr>\n          <td>{dealer['id']}</td>\n          <td><a href={'/dealer/'+dealer['id']}>{dealer['full_name']}</a></td>\n          <td>{dealer['city']}</td>\n          <td>{dealer['address']}</td>\n          <td>{dealer['zip']}</td>\n          <td>{dealer['state']}</td>\n          {isLoggedIn ? (\n            <td><a href={`/postreview/${dealer['id']}`}><img src={review_icon} className=\"review_icon\" alt=\"Post Review\"/></a></td>\n           ):<></>\n          }\n        </tr>\n      ))}\n     </table>;\n  </div>\n)\n}\n\nexport default Dealers\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,eAAe,CACtB,MAAO,qBAAqB,CAC5B,MAAO,CAAAC,MAAM,KAAM,kBAAkB,CACrC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAElD,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAClD;AACA,GAAI,CAACa,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAEtC;AACA,GAAI,CAAAe,UAAU,CAAE,wBAAwB,CAExC,GAAI,CAAAC,mBAAmB,CAAG,yBAAyB,CAEnD,KAAM,CAAAC,aAAa,CAAG,KAAO,CAAAC,KAAK,EAAK,CACrCF,mBAAmB,CAAGA,mBAAmB,CAACE,KAAK,CAC/C,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACJ,mBAAmB,CAAE,CAC3CK,MAAM,CAAE,KACV,CAAC,CAAC,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,CAAC,CAC/B,GAAGD,MAAM,CAACE,MAAM,GAAK,GAAG,CAAE,CACxB,GAAI,CAAAC,aAAa,CAAGC,KAAK,CAACC,IAAI,CAACL,MAAM,CAACM,OAAO,CAAC,CAC9ChB,cAAc,CAACa,aAAa,CAAC,CAC/B,CACF,CAAC,CAED,KAAM,CAAAI,WAAW,CAAG,KAAAA,CAAA,GAAU,CAC5B,KAAM,CAAAV,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACL,UAAU,CAAE,CAClCM,MAAM,CAAE,KACV,CAAC,CAAC,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,CAAC,CAC/B,GAAGD,MAAM,CAACE,MAAM,GAAK,GAAG,CAAE,CACxB,GAAI,CAAAM,WAAW,CAAGJ,KAAK,CAACC,IAAI,CAACL,MAAM,CAACM,OAAO,CAAC,CAC5C,GAAI,CAAAf,MAAM,CAAG,EAAE,CACfiB,WAAW,CAACC,OAAO,CAAEC,MAAM,EAAG,CAC5BnB,MAAM,CAACoB,IAAI,CAACD,MAAM,CAACd,KAAK,CAAC,CAC3B,CAAC,CAAC,CAEFJ,SAAS,CAACY,KAAK,CAACC,IAAI,CAAC,GAAI,CAAAO,GAAG,CAACrB,MAAM,CAAC,CAAC,CAAC,CACtCD,cAAc,CAACkB,WAAW,CAAC,CAC7B,CACF,CAAC,CACD7B,SAAS,CAAC,IAAM,CACd4B,WAAW,CAAC,CAAC,CACf,CAAC,CAAC,EAAE,CAAC,CAGP,GAAI,CAAAM,UAAU,CAAGC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,EAAI,IAAI,CAAG,IAAI,CAAG,KAAK,CAC1E,mBACE9B,KAAA,QAAA+B,QAAA,eACIjC,IAAA,CAACH,MAAM,GAAC,CAAC,cAEVK,KAAA,UAAOgC,SAAS,CAAC,OAAO,CAAAD,QAAA,eACvB/B,KAAA,OAAA+B,QAAA,eACAjC,IAAA,OAAAiC,QAAA,CAAI,IAAE,CAAI,CAAC,cACXjC,IAAA,OAAAiC,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBjC,IAAA,OAAAiC,QAAA,CAAI,MAAI,CAAI,CAAC,cACbjC,IAAA,OAAAiC,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBjC,IAAA,OAAAiC,QAAA,CAAI,KAAG,CAAI,CAAC,cACZjC,IAAA,OAAAiC,QAAA,cACA/B,KAAA,WAAQiC,IAAI,CAAC,OAAO,CAACC,EAAE,CAAC,OAAO,CAACC,QAAQ,CAAGC,CAAC,EAAK1B,aAAa,CAAC0B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE,CAAAP,QAAA,eAC/EjC,IAAA,WAAQwC,KAAK,CAAC,EAAE,CAACC,QAAQ,MAACC,QAAQ,MAACC,MAAM,MAAAV,QAAA,CAAC,OAAK,CAAQ,CAAC,cACxDjC,IAAA,WAAQwC,KAAK,CAAC,KAAK,CAAAP,QAAA,CAAC,YAAU,CAAQ,CAAC,CACtCzB,MAAM,CAACoC,GAAG,CAAC/B,KAAK,eACbb,IAAA,WAAQwC,KAAK,CAAE3B,KAAM,CAAAoB,QAAA,CAAEpB,KAAK,CAAS,CACxC,CAAC,EACM,CAAC,CAEL,CAAC,CACJiB,UAAU,cACP9B,IAAA,OAAAiC,QAAA,CAAI,eAAa,CAAI,CAAC,cACrBjC,IAAA,CAAAI,SAAA,GAAI,CAAC,EAEN,CAAC,CACLE,WAAW,CAACsC,GAAG,CAACjB,MAAM,eACpBzB,KAAA,OAAA+B,QAAA,eACEjC,IAAA,OAAAiC,QAAA,CAAKN,MAAM,CAAC,IAAI,CAAC,CAAK,CAAC,cACvB3B,IAAA,OAAAiC,QAAA,cAAIjC,IAAA,MAAG6C,IAAI,CAAE,UAAU,CAAClB,MAAM,CAAC,IAAI,CAAE,CAAAM,QAAA,CAAEN,MAAM,CAAC,WAAW,CAAC,CAAI,CAAC,CAAI,CAAC,cACpE3B,IAAA,OAAAiC,QAAA,CAAKN,MAAM,CAAC,MAAM,CAAC,CAAK,CAAC,cACzB3B,IAAA,OAAAiC,QAAA,CAAKN,MAAM,CAAC,SAAS,CAAC,CAAK,CAAC,cAC5B3B,IAAA,OAAAiC,QAAA,CAAKN,MAAM,CAAC,KAAK,CAAC,CAAK,CAAC,cACxB3B,IAAA,OAAAiC,QAAA,CAAKN,MAAM,CAAC,OAAO,CAAC,CAAK,CAAC,CACzBG,UAAU,cACT9B,IAAA,OAAAiC,QAAA,cAAIjC,IAAA,MAAG6C,IAAI,gBAAAC,MAAA,CAAiBnB,MAAM,CAAC,IAAI,CAAC,CAAG,CAAAM,QAAA,cAACjC,IAAA,QAAK+C,GAAG,CAAEjD,WAAY,CAACoC,SAAS,CAAC,aAAa,CAACc,GAAG,CAAC,aAAa,CAAC,CAAC,CAAG,CAAC,CAAI,CAAC,cACtHhD,IAAA,CAAAI,SAAA,GAAI,CAAC,EAEN,CACL,CAAC,EACI,CAAC,IACX,EAAK,CAAC,CAER,CAAC,CAED,cAAe,CAAAC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}